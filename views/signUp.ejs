<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link href="css/style.css" rel="stylesheet" />
<title> Signup page</title>
</head>

<body>
    <section class=" signup">

        <div class="container">
            <main class="signup-container">
                <h1 class="heading-primary">Create new account<span class="custom-dot">.</span></h1>
                <p class="text-mute">Already A Member? <a href="/login">Log in</a></p>
                <form class="signup-form" action="/userSignUp" method="POST" id="reg-form" >
                    <div class="f-row input-wrapper">
                        <label class="inp">
                            <input type="text" class="input-text" autocomplete="off" placeholder="username">
                            <span class="label">UserName</span>
                            <span class="input-icon"><i class="fa-solid fa-address-card"></i></span>
                        </label>
                        <label class="inp">
                            <input type="text" class="input-text" placeholder="&nbsp;">
                            <span class="label">Last name</span>
                            <span class="input-icon"><i class="fa-solid fa-address-card"></i></span>
                        </label>
                    </div>
                    <label class="inp">
                        <input type="email" name="email" class="input-text" id="signupform" placeholder="&nbsp;">
                        <span class="label">Email</span>
                        <span class="input-icon"><i class="fa-solid fa-envelope"></i></span>
                    </label>
                    <label class="inp">
                        <input type="password" class="input-text" autocomplete="off" name="password" id="signuppassword23" placeholder="password" id="password">
                        <span class="label">Password</span>
                        <span class="input-icon input-icon-password" data-password><i
                                class="fa-solid fa-eye"></i></span>
                    </label>
                    <button class="btn btn-signup" value="submit Form" type="submit">Create account</button>
                </form>
                <script>
                    const form = document.getElementById('reg-form')
                    form.addEventListener('submit',registerUser)
                    // 1.Send Data to JSON (very common when you are using JS)
                    // 2.Send Data to Urlencodded (very common when you are using JS)
                      async function registerUser(event){
                        event.preventDefault()  
                        const username=document.getElementById('username').value
                        const password=document.getElementById('password').value
                         const result = await fetch('/api/register',{
                            method:'POST',
                            header: {
                                'Content-Type':'application/json'
                            },
                            body:JSON.stringify({
                                username,password
                            })
                        }).then((res)=> res.json())
                        if (result.status ==='ok'){
                        //  everythings went fine
                        alert('success')
                        }
                        else{
                            alert(result.error);
                        }
                        console.log(result)
                     }
                </script>
            </main>
            <div class="welcome-container">
                <h1 class="heading-secondary">Welcome to <span class="lg">Algoblend Cv Maker</span></h1>
                <img src="assets\img\ui.jpg"
                    alt="">
            </div>
        </div>
        <script>
            const eyeClick = document.querySelector("[data-password]");
            const password_elem = document.getElementById("password");

            eyeClick.onclick = () => {
                const icon = eyeClick.children[0];
                icon.classList.toggle("fa-eye-slash");
                if (password_elem.type === "password") {
                    password_elem.type = "text";
                } else if (password_elem.type === "text") {
                    password_elem.type = "password";
                }
            };

        </script>
    </section>

</body>

</html>